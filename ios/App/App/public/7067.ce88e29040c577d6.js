"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7067],{7067:(S,v,u)=>{u.r(v),u.d(v,{Tab2PageModule:()=>C});var d=u(4742),P=u(177),p=u(9417),I=u(1307),y=u(6361),m=u(467),F=u(553),g=u(7464),h=function(r){return r.Prompt="PROMPT",r.Camera="CAMERA",r.Photos="PHOTOS",r}(h||{}),b=function(r){return r.Rear="REAR",r.Front="FRONT",r}(b||{}),T=function(r){return r.Uri="uri",r.Base64="base64",r.DataUrl="dataUrl",r}(T||{});class E extends g.E_{getPhoto(t){var o=this;return(0,m.A)(function*(){return new Promise(function(){var n=(0,m.A)(function*(a,i){if(t.webUseInput||t.source===h.Photos)o.fileInputExperience(t,a,i);else if(t.source===h.Prompt){let l=document.querySelector("pwa-action-sheet");l||(l=document.createElement("pwa-action-sheet"),document.body.appendChild(l)),l.header=t.promptLabelHeader||"Photo",l.cancelable=!1,l.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],l.addEventListener("onSelection",function(){var s=(0,m.A)(function*(c){0===c.detail?o.fileInputExperience(t,a,i):o.cameraExperience(t,a,i)});return function(c){return s.apply(this,arguments)}}())}else o.cameraExperience(t,a,i)});return function(a,i){return n.apply(this,arguments)}}())})()}pickImages(t){var o=this;return(0,m.A)(function*(){return new Promise(function(){var n=(0,m.A)(function*(a,i){o.multipleFileInputExperience(a,i)});return function(a,i){return n.apply(this,arguments)}}())})()}cameraExperience(t,o,n){var a=this;return(0,m.A)(function*(){if(customElements.get("pwa-camera-modal")){const i=document.createElement("pwa-camera-modal");i.facingMode=t.direction===b.Front?"user":"environment",document.body.appendChild(i);try{yield i.componentOnReady(),i.addEventListener("onPhoto",function(){var l=(0,m.A)(function*(s){const c=s.detail;null===c?n(new g.I9("User cancelled photos app")):c instanceof Error?n(c):o(yield a._getCameraPhoto(c,t)),i.dismiss(),document.body.removeChild(i)});return function(s){return l.apply(this,arguments)}}()),i.present()}catch{a.fileInputExperience(t,o,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),a.fileInputExperience(t,o,n)})()}fileInputExperience(t,o,n){let a=document.querySelector("#_capacitor-camera-input");const i=()=>{var l;null===(l=a.parentNode)||void 0===l||l.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",l=>{const s=a.files[0];let c="jpeg";if("image/png"===s.type?c="png":"image/gif"===s.type&&(c="gif"),"dataUrl"===t.resultType||"base64"===t.resultType){const f=new FileReader;f.addEventListener("load",()=>{if("dataUrl"===t.resultType)o({dataUrl:f.result,format:c});else if("base64"===t.resultType){const M=f.result.split(",")[1];o({base64String:M,format:c})}i()}),f.readAsDataURL(s)}else o({webPath:URL.createObjectURL(s),format:c}),i()}),a.addEventListener("cancel",l=>{n(new g.I9("User cancelled photos app")),i()})),a.accept="image/*",a.capture=!0,t.source===h.Photos||t.source===h.Prompt?a.removeAttribute("capture"):t.direction===b.Front?a.capture="user":t.direction===b.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(t,o){let n=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var i;null===(i=n.parentNode)||void 0===i||i.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",i=>{const l=[];for(let s=0;s<n.files.length;s++){const c=n.files[s];let f="jpeg";"image/png"===c.type?f="png":"image/gif"===c.type&&(f="gif"),l.push({webPath:URL.createObjectURL(c),format:f})}t({photos:l}),a()}),n.addEventListener("cancel",i=>{o(new g.I9("User cancelled photos app")),a()})),n.accept="image/*",n.click()}_getCameraPhoto(t,o){return new Promise((n,a)=>{const i=new FileReader,l=t.type.split("/")[1];"uri"===o.resultType?n({webPath:URL.createObjectURL(t),format:l,saved:!1}):(i.readAsDataURL(t),i.onloadend=()=>{const s=i.result;n("dataUrl"===o.resultType?{dataUrl:s,format:l,saved:!1}:{base64String:s.split(",")[1],format:l,saved:!1})},i.onerror=s=>{a(s)})})}checkPermissions(){var t=this;return(0,m.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw t.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw t.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var t=this;return(0,m.A)(function*(){throw t.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var t=this;return(0,m.A)(function*(){throw t.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var t=this;return(0,m.A)(function*(){throw t.unavailable("Not implemented on web.")})()}}new E;const R=(0,g.F3)("Camera",{web:()=>new E});var e=u(4438),U=u(6044),w=u(7408);function L(r,t){if(1&r&&(e.j41(0,"ion-item")(1,"ion-thumbnail",10),e.nrm(2,"img",11),e.k0s()()),2&r){const o=e.XpG();e.R7$(2),e.Y8G("src",o.imagen,e.B4B)}}const A=[{path:"",component:(()=>{var r;class t{constructor(n,a){this.fb=n,this.habitoService=a,this.imagen=null,this.habitoForm=this.fb.group({titulo:["",p.k0.required],descripcion:["",p.k0.required]})}seleccionarImagen(){var n=this;return(0,m.A)(function*(){try{const a=yield R.getPhoto({quality:90,allowEditing:!1,resultType:T.DataUrl,source:h.Photos});n.imagen=a.dataUrl||null}catch(a){console.error("Error al seleccionar imagen",a)}})()}agregarHabito(){if(this.habitoForm.valid){var n;const a=new F.y(Date.now().toString(),this.habitoForm.value.titulo,this.habitoForm.value.descripcion,!1,null!==(n=this.imagen)&&void 0!==n?n:void 0);this.habitoService.agregarHabito(a),console.log("H\xe1bito agregado:",a),this.habitoForm.reset(),this.imagen=null}}}return(r=t).\u0275fac=function(n){return new(n||r)(e.rXU(p.ok),e.rXU(U.p))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-tab2"]],standalone:!1,decls:22,vars:12,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[3,"ngSubmit","formGroup"],["formControlName","titulo","placeholder","T\xedtulo",3,"clearInput"],["formControlName","descripcion","placeholder","Descripci\xf3n"],["shape","round","expand","block",3,"click"],[4,"ngIf"],["expand","block","shape","round","type","submit",3,"disabled"],["slot","start"],["alt","Imagen seleccionada",3,"src"]],template:function(n,a){1&n&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()(),e.j41(5,"ion-content",1)(6,"ion-header",2)(7,"ion-toolbar")(8,"ion-title",3),e.EFF(9),e.nI1(10,"translate"),e.k0s()()(),e.j41(11,"form",4),e.bIt("ngSubmit",function(){return a.agregarHabito()}),e.j41(12,"ion-item"),e.nrm(13,"ion-input",5),e.k0s(),e.j41(14,"ion-item"),e.nrm(15,"ion-textarea",6),e.k0s(),e.j41(16,"ion-item")(17,"ion-button",7),e.bIt("click",function(){return a.seleccionarImagen()}),e.EFF(18,"Seleccionar Imagen"),e.k0s()(),e.DNE(19,L,3,1,"ion-item",8),e.j41(20,"ion-button",9),e.EFF(21," Agregar H\xe1bito "),e.k0s()()()),2&n&&(e.Y8G("translucent",!0),e.R7$(3),e.SpI(" ",e.bMT(4,8,"TAB2_TITLE")," "),e.R7$(2),e.Y8G("fullscreen",!0),e.R7$(4),e.JRh(e.bMT(10,10,"TAB2_TITLE")),e.R7$(2),e.Y8G("formGroup",a.habitoForm),e.R7$(2),e.Y8G("clearInput",!0),e.R7$(6),e.Y8G("ngIf",a.imagen),e.R7$(),e.Y8G("disabled",a.habitoForm.invalid))},dependencies:[d.Jm,d.W9,d.eU,d.$w,d.uz,d.nc,d.Zx,d.BC,d.ai,d.Gw,P.bT,p.qT,p.BC,p.cb,p.j4,p.JD,w.D9],encapsulation:2}),t})()}];let x=(()=>{var r;class t{}return(r=t).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[y.iI.forChild(A),y.iI]}),t})(),C=(()=>{var r;class t{}return(r=t).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[d.bv,P.MD,p.YN,p.X1,I.S,x,w.h]}),t})()}}]);